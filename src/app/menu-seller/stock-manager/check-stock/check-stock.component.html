<app-loading-mask [loading]="loading"></app-loading-mask>

<div *ngIf="displayData.length" class="table-container">
    <table mat-table [dataSource]="displayData" class="mat-table">
        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Nome Do Produto</th>
            <td mat-cell *matCellDef="let displayProduct">
                {{ displayProduct.name }}
            </td>
        </ng-container>

        <ng-container matColumnDef="00">
            <th mat-header-cell *matHeaderCellDef>00</th>
            <td mat-cell *matCellDef="let displayProduct"
                [ngClass]="{'colored': this.type === this.stockType.EDIT && displayProduct.size['00'] && (displayProduct.size['00']['stock'] !== displayProduct.size['00']['oldStock'])}">
                <div *ngIf="displayProduct.size['00'] && (type === stockType.VISUALIZE)">
                    {{ displayProduct.size['00']['stock'] }}
                </div>
                <div class="edit-mode-container" *ngIf="displayProduct.size['00'] && (type !== stockType.VISUALIZE)">
                    <input type="number" class="form-control" [(ngModel)]="displayProduct.size['00']['stock']">
                </div>
                <div *ngIf="!displayProduct.size['00']">
                    - -
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="02">
            <th mat-header-cell *matHeaderCellDef>02</th>
            <td mat-cell *matCellDef="let displayProduct"
                [ngClass]="{'colored': this.type === this.stockType.EDIT && displayProduct.size['02'] && (displayProduct.size['02']['stock'] !== displayProduct.size['02']['oldStock'])}">
                <div *ngIf="displayProduct.size['02'] && (type === stockType.VISUALIZE)">
                    {{ displayProduct.size['02']['stock'] }}
                </div>
                <div class="edit-mode-container" *ngIf="displayProduct.size['02'] && (type !== stockType.VISUALIZE)">
                    <input type="number" class="form-control" [(ngModel)]="displayProduct.size['02']['stock']">
                </div>
                <div *ngIf="!displayProduct.size['02']">
                    - -
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="04">
            <th mat-header-cell *matHeaderCellDef>04</th>
            <td mat-cell *matCellDef="let displayProduct"
                [ngClass]="{'colored': this.type === this.stockType.EDIT && displayProduct.size['04'] && (displayProduct.size['04']['stock'] !== displayProduct.size['04']['oldStock'])}">
                <div *ngIf="displayProduct.size['04'] && (type === stockType.VISUALIZE)">
                    {{ displayProduct.size['04']['stock'] }}
                </div>
                <div class="edit-mode-container" *ngIf="displayProduct.size['04'] && (type !== stockType.VISUALIZE)">
                    <input type="number" class="form-control" [(ngModel)]="displayProduct.size['04']['stock']">
                </div>
                <div *ngIf="!displayProduct.size['04']">
                    - -
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="06">
            <th mat-header-cell *matHeaderCellDef>06</th>
            <td mat-cell *matCellDef="let displayProduct"
                [ngClass]="{'colored': this.type === this.stockType.EDIT && displayProduct.size['06'] && (displayProduct.size['06']['stock'] !== displayProduct.size['06']['oldStock'])}">
                <div *ngIf="displayProduct.size['06'] && (type === stockType.VISUALIZE)">
                    {{ displayProduct.size['06']['stock'] }}
                </div>
                <div class="edit-mode-container" *ngIf="displayProduct.size['06'] && (type !== stockType.VISUALIZE)">
                    <input type="number" class="form-control" [(ngModel)]="displayProduct.size['06']['stock']">
                </div>
                <div *ngIf="!displayProduct.size['06']">
                    - -
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="08">
            <th mat-header-cell *matHeaderCellDef>08</th>
            <td mat-cell *matCellDef="let displayProduct"
                [ngClass]="{'colored': this.type === this.stockType.EDIT && displayProduct.size['08'] && (displayProduct.size['08']['stock'] !== displayProduct.size['08']['oldStock'])}">
                <div *ngIf="displayProduct.size['08'] && (type === stockType.VISUALIZE)">
                    {{ displayProduct.size['08']['stock'] }}
                </div>
                <div class="edit-mode-container" *ngIf="displayProduct.size['08'] && (type !== stockType.VISUALIZE)">
                    <input type="number" class="form-control" [(ngModel)]="displayProduct.size['08']['stock']">
                </div>
                <div *ngIf="!displayProduct.size['08']">
                    - -
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="10">
            <th mat-header-cell *matHeaderCellDef>10</th>
            <td mat-cell *matCellDef="let displayProduct"
                [ngClass]="{'colored': this.type === this.stockType.EDIT && displayProduct.size['10'] && (displayProduct.size['10']['stock'] !== displayProduct.size['10']['oldStock'])}">
                <div *ngIf="displayProduct.size['10'] && (type === stockType.VISUALIZE)">
                    {{ displayProduct.size['10']['stock'] }}
                </div>
                <div class="edit-mode-container" *ngIf="displayProduct.size['10'] && (type !== stockType.VISUALIZE)">
                    <input type="number" class="form-control" [(ngModel)]="displayProduct.size['10']['stock']">
                </div>
                <div *ngIf="!displayProduct.size['10']">
                    - -
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="12">
            <th mat-header-cell *matHeaderCellDef>12</th>
            <td mat-cell *matCellDef="let displayProduct"
                [ngClass]="{'colored': this.type === this.stockType.EDIT && displayProduct.size['12'] && (displayProduct.size['12']['stock'] !== displayProduct.size['12']['oldStock'])}">
                <div *ngIf="displayProduct.size['12'] && (type === stockType.VISUALIZE)">
                    {{ displayProduct.size['12']['stock'] }}
                </div>
                <div class="edit-mode-container" *ngIf="displayProduct.size['12'] && (type !== stockType.VISUALIZE)">
                    <input type="number" class="form-control" [(ngModel)]="displayProduct.size['12']['stock']">
                </div>
                <div *ngIf="!displayProduct.size['12']">
                    - -
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="14">
            <th mat-header-cell *matHeaderCellDef>14</th>
            <td mat-cell *matCellDef="let displayProduct"
                [ngClass]="{'colored': this.type === this.stockType.EDIT && displayProduct.size['14'] && (displayProduct.size['14']['stock'] !== displayProduct.size['14']['oldStock'])}">
                <div *ngIf="displayProduct.size['14'] && (type === stockType.VISUALIZE)">
                    {{ displayProduct.size['14']['stock'] }}
                </div>
                <div class="edit-mode-container" *ngIf="displayProduct.size['14'] && (type !== stockType.VISUALIZE)">
                    <input type="number" class="form-control" [(ngModel)]="displayProduct.size['14']['stock']">
                </div>
                <div *ngIf="!displayProduct.size['14']">
                    - -
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="PP">
            <th mat-header-cell *matHeaderCellDef>PP</th>
            <td mat-cell *matCellDef="let displayProduct"
                [ngClass]="{'colored': this.type === this.stockType.EDIT && displayProduct.size['PP'] && (displayProduct.size['PP']['stock'] !== displayProduct.size['PP']['oldStock'])}">
                <div *ngIf="displayProduct.size['PP'] && (type === stockType.VISUALIZE)">
                    {{ displayProduct.size['PP']['stock'] }}
                </div>
                <div class="edit-mode-container" *ngIf="displayProduct.size['PP'] && (type !== stockType.VISUALIZE)">
                    <input type="number" class="form-control" [(ngModel)]="displayProduct.size['PP']['stock']">
                </div>
                <div *ngIf="!displayProduct.size['PP']">
                    - -
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="P">
            <th mat-header-cell *matHeaderCellDef>P</th>
            <td mat-cell *matCellDef="let displayProduct"
                [ngClass]="{'colored': this.type === this.stockType.EDIT && displayProduct.size['P'] && (displayProduct.size['P']['stock'] !== displayProduct.size['P']['oldStock'])}">
                <div *ngIf="displayProduct.size['P'] && (type === stockType.VISUALIZE)">
                    {{ displayProduct.size['P']['stock'] }}
                </div>
                <div class="edit-mode-container" *ngIf="displayProduct.size['P'] && (type !== stockType.VISUALIZE)">
                    <input type="number" class="form-control" [(ngModel)]="displayProduct.size['P']['stock']">
                </div>
                <div *ngIf="!displayProduct.size['P']">
                    - -
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="M">
            <th mat-header-cell *matHeaderCellDef>M</th>
            <td mat-cell *matCellDef="let displayProduct"
                [ngClass]="{'colored': this.type === this.stockType.EDIT && displayProduct.size['M'] && (displayProduct.size['M']['stock'] !== displayProduct.size['M']['oldStock'])}">
                <div *ngIf="displayProduct.size['M'] && (type === stockType.VISUALIZE)">
                    {{ displayProduct.size['M']['stock'] }}
                </div>
                <div class="edit-mode-container" *ngIf="displayProduct.size['M'] && (type !== stockType.VISUALIZE)">
                    <input type="number" class="form-control" [(ngModel)]="displayProduct.size['M']['stock']">
                </div>
                <div *ngIf="!displayProduct.size['M']">
                    - -
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="G">
            <th mat-header-cell *matHeaderCellDef>G</th>
            <td mat-cell *matCellDef="let displayProduct"
                [ngClass]="{'colored': this.type === this.stockType.EDIT && displayProduct.size['G'] && (displayProduct.size['G']['stock'] !== displayProduct.size['G']['oldStock'])}">
                <div *ngIf="displayProduct.size['G'] && (type === stockType.VISUALIZE)">
                    {{ displayProduct.size['G']['stock'] }}
                </div>
                <div class="edit-mode-container" *ngIf="displayProduct.size['G'] && (type !== stockType.VISUALIZE)">
                    <input type="number" class="form-control" [(ngModel)]="displayProduct.size['G']['stock']">
                </div>
                <div *ngIf="!displayProduct.size['G']">
                    - -
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="GG">
            <th mat-header-cell *matHeaderCellDef>GG</th>
            <td mat-cell *matCellDef="let displayProduct"
                [ngClass]="{'colored': this.type === this.stockType.EDIT && displayProduct.size['GG'] && (displayProduct.size['GG']['stock'] !== displayProduct.size['GG']['oldStock'])}">
                <div *ngIf="displayProduct.size['GG'] && (type === stockType.VISUALIZE)">
                    {{ displayProduct.size['GG']['stock'] }}
                </div>
                <div class="edit-mode-container" *ngIf="displayProduct.size['GG'] && (type !== stockType.VISUALIZE)">
                    <input type="number" class="form-control" [(ngModel)]="displayProduct.size['GG']['stock']">
                </div>
                <div *ngIf="!displayProduct.size['GG']">
                    - -
                </div>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <button class="btn btn-orange pull-right" *ngIf="(type === stockType.EDIT)" (click)="updateStock()">
        Atualizar estoque da loja
    </button>

    <button class="btn btn-orange pull-right" *ngIf="(type === stockType.ADD)" (click)="addStock()">
        Adicionar ao estoque da loja
    </button>

</div>
